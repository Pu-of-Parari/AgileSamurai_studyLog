# 第三部：アジャイルな計画作り

## 第六章：ユーザーストーリーを集める

ユーザーストーリーを使った要求の集め方を知ることで、

- どうやって計画に最新の状況を反映し続けるのか
- どうやって計画には一番新鮮で信頼のおける情報だけを含めるようにするのか
- どうすれば時期尚早な事前分析を避けられるのか

ができるようになる。

### 文書化の難しさ

実際のソフトウェアプロジェクトでは、何を文書に書くべきかを話し合うことに多くの時間を費やしてしまっている。

ソフトウェアへの要求を表現する手段として文書に頼りすぎることの弊害は時間だけじゃない。

- 変化に対処できない
- 顧客の欲しいものに合わせるのではなく、仕様に合わせて作ることになる
- 下手な推測や誤った前提を招き寄せる
- 多くの時間を無駄にする

要求を文書として集めようとすることの問題点は、用意する文書量の多寡ではない。コミュニケーションに問題がある。文書と会話できるわけじゃないし、他の誰かが書いた文書はとても誤解を招きやすい。

**アジャイル開発の原則：**

> 情報を伝える最も効率的で効果的な方法はface to faceで話をすることです。

### そこでユーザーストーリー

ユーザーストーリーは顧客がソフトウェアで実現したいと思っているフィーチャを簡潔に記述したもの。記述するインデックスカードには完結にしか書かないので、詳細は顧客のところへ出向いて直に会話することを促進するという仕掛けになっている。

要求を収集するときの一番の目的は、フィーチャの本質をとらえるキーワードを書き留めておくこと。ありとあらゆる詳細を聞き出すことではない。ユーザーストーリーは「会話の約束」だと考える。しかるべき時が来たらその項目について詳細を検討するが、それは本当に必要だという確信を持てるようになってからの話。

### よくかけているユーザーストーリーとは

よくかけているユーザーストーリーの特徴

- 顧客にとって何かしらの価値が書かれていること
  - 「価値がある」：君のお客さんが対価を払ってもいいと思えること
  - ユーザーストーリーはビジネスの観点から評価できなきゃいけない。お客さんに理解できるシンプルな言葉遣いで書く。
  - 「データベースにコネクションプールを導入する」-> 「現状の10秒かかるページ読み込み速度を2秒まで縮める」
- エンドツーエンドになっていること
  - ケーキを切るようにスライスする
  - アーキテクチャのすべてのレイヤを貫いて、お客さんにとって価値のある成果を届けるようにする
- ストーリーが独立している
  - プロジェクトには変化がつきもの
  - 必ずしもストーリーを互いに独立させられるわけじゃないが、できるだけエンドツーエンドの切り口になったフィーチャ単位で切り分けることを意識する
  - 独立していれば必要に応じてスコープを柔軟に調整できるようになる
- 交渉の余地がある
  - 予算の範囲内に収まるようにある程度の融通が利くようにできるから
  - ストーリーによってはポルシェ級のものが必要になることもあれば、質素なフォードで間に合うものもある
- テストできる
  - テストできる＝どうなっていればちゃんと動いているのかがわかる
  - 開発チームにとっては作業範囲と仕事の官僚基準が明確になる
- 小さい、見積もれる
  - ストーリーを1-5日で完了できるサイズまで小さくしておけばイテレーションの範囲に収まりそうかどうかは確実にわかる

ユーザーストーリーと要件定義書・仕様書の特徴まとめ

| ユーザーストーリー                                           | 要件定義書と仕様書                                           |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ・無駄がなく正確。必要な分を必要な時に<br />・対面でのコミュニケーションを促す<br />・計画がシンプル<br />・低コスト、素早く手軽<br />・最新の情報が反映される<br />・チームが学習することを踏まえている<br />・フィードバックを即時反映できる<br />・見積もり精度の高低に依らない<br />・チームの協調作業や新しい取り組みを歓迎する | ・重厚、不正確で最新じゃない<br />・憶測や誤った前提を招き寄せる<br />・計画が複雑<br />・コストがかさむ、遅い、手間がかかる<br />・情報が古くなったまま放置される<br />・チームが学習するといううことを考慮しない<br />・フィードバックを即時反映できない<br />・さも見積もり精度が高いかのように取り繕う<br />・オープンな協調作業や新しい取り組みを歓迎しない |

**ユーザーストーリーのテンプレート**

```
<ユーザーの種類>として、
<達成したいゴール>をしたい。
何故なら<理由>だからだ。
```

誰のためのストーリーで、何をしたいのか、なぜそうしたいのか

テンプレートを使うメリットとして、だれが、何を、なぜを明らかにできるし、ビジネスの視点に集中できるという点がある。デメリットとして、記述が冗長なので少しわかりづらいという点がある。テンプレートに従うもよし、短く簡潔にまとめるもよし。合わせ技もよし。



### ストーリー収集ワークショップを開こう

開発チーム、顧客が一緒になって開発対象のソフトウェアのユーザーストーリーを書いてみる。

ステップ

1. 大きく手見通しの良い部屋を用意する
   - 書いた図を張り出せる壁や、カードを並べておける大きなテーブルもあるとよい
2. 図をたくさん書く
   - ペルソナ(システムの想定ユーザーを表現したもの)
   - フローチャート、プロセスフロー
   - シナリオ
   - システム概要図
   - コンセプトデザイン
   - 絵コンテ　などなど
3. ユーザーストーリーをたくさん書く
   - 小さくて具体的なエンドツーエンドの機能を心がける(1-5日で実装できるサイズを目安に)
   - より大きなサイズのストーリーはエピックとして扱う
   - エピックはたぶんやらないといけないが本当に必要なのかはまだ確信が持てないものをくくりだしておくのにも便利
   - 1日かけて開催した場合で、ざっくりとしたストーリーを10-40挙げられれば十分。
4. その他もろもろをブレインストーミング
   - データ移行や負荷テスト、書類仕事、本番環境運用手順書やトレーニング教材の準備、検収期間など
   - プロジェクトのために必要なもろもろ全てをカードに書き留めておく
   - 他のストーリーと同じように優先順位をつけておく
5. リストを磨き上げる
   - 最初のマスターストーリーができたら、少し時間を取って眺めてみよう
   - もれなくダブりもない？
   - グループ分けできそうなストーリーはない？
   - お客さんにとって価値のある、シンプルでわかりやすいToDOリストになっている？





